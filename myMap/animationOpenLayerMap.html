<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display a map</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.1.0/ol.css">
    <script src="https://cdn.jsdelivr.net/npm/ol@v7.1.0/dist/ol.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
</body>
<script>
    var markers = [];
    var marker2;
    var time = 0;
    var locationS;
    var locationE;
    var rotationA;
    var markerCar;
    var markerIcon;
    var dr = true;
    var pracaNoronhaSantos = ol.proj.fromLonLat([-43.19848881797589, -22.906644586771165]);
    var pracaDeodoro = ol.proj.fromLonLat([-43.17509995536603, -22.91395763413628]);
    var listLonLat = [
        [-43.19821603433218, -22.906235579377366],
        [-43.19787271157827, -22.90637393840575],
        [-43.1976795925292, -22.906907607621335],
        [-43.197228981414696, -22.906966904071183],
        [-43.19664962426748, -22.906729718116182],
        [-43.1962204708251, -22.906630890512474],
        [-43.19564111367788, -22.906433235088983],
        [-43.19529779092398, -22.906413469530776],
        [-43.19480426446524, -22.90625534496148],
        [-43.1942034496459, -22.906097220207812],
        [-43.1936455501708, -22.905978626521517],
        [-43.19330222741689, -22.905860032731525],
        [-43.19295890466299, -22.90576120449397],
        [-43.1926370395812, -22.905642610513823],
        [-43.192207886138824, -22.905464719349112],
        [-43.191478325286774, -22.90528682795103],
        [-43.19031961099233, -22.904950810229067],
        [-43.18984754220571, -22.904713620747557],
        [-43.18909652368154, -22.904515962529388],
        [-43.18832404748526, -22.904259006415046],
        [-43.18789489404287, -22.904140411121148],
        [-43.187530113616845, -22.904061347534252],
        [-43.187165333190826, -22.903903220222162],
        [-43.186779095092675, -22.903863688365334],
        [-43.186457230010895, -22.903745092725714],
        [-43.18617828027334, -22.903606731015074],
        [-43.18585641519156, -22.903448603172905],
        [-43.185556007781884, -22.903468369163264],
        [-43.185277058044335, -22.903290475146378],
        [-43.18510539666738, -22.903250943110933],
        [-43.18493373529043, -22.90319164503616],
        [-43.184676243225, -22.90319164503616],
        [-43.18452603952017, -22.903112580896135],
        [-43.18437583581534, -22.903033516709996],
        [-43.1841183437499, -22.902954452477786],
        [-43.18388230935659, -22.90289515427338],
        [-43.183796478668114, -22.903132346935465],
        [-43.183667732635406, -22.903428837179675],
        [-43.183517528930565, -22.903745092725714],
        [-43.18343169824209, -22.904061347534252],
        [-43.18330295220938, -22.904259006415046],
        [-43.1832171215209, -22.904476430851176],
        [-43.18313129083243, -22.904654323312357],
        [-43.1831098331603, -22.904792683954156],
        [-43.18295962945547, -22.905049639057253],
        [-43.182916714111236, -22.90518799929572],
        [-43.18280942575064, -22.905444953649734],
        [-43.1826592220458, -22.905682141852054],
        [-43.18261630670157, -22.905899564006376],
        [-43.182530476013085, -22.90611698581209],
        [-43.18238027230825, -22.90637393840575],
        [-43.18214423791494, -22.906532062836746],
        [-43.182015491882225, -22.906887842132278],
        [-43.181800915161034, -22.907026200495096],
        [-43.18143613473501, -22.906927373107493],
        [-43.181243015685936, -22.906828545647855],
        [-43.18102843896475, -22.90686807664035],
        [-43.18092115060415, -22.90712502781068],
        [-43.1808567775878, -22.907421509325246],
        [-43.180770946899315, -22.907698224820592],
        [-43.180706573882965, -22.90789587840007],
        [-43.18062074319448, -22.908133062315116],
        [-43.180513454833886, -22.908409776358283],
        [-43.180449081817535, -22.90868648983667],
        [-43.18034179345694, -22.908943437560936],
        [-43.18021304742422, -22.90920038479821],
        [-43.18012721673574, -22.909398036187838],
        [-43.180041386047264, -22.909654982563566],
        [-43.17993409768667, -22.90991192845233],
        [-43.17986972467031, -22.910109578804608],
        [-43.179762436309716, -22.910366523831797],
        [-43.17965514794912, -22.91062346837198],
        [-43.17959077493277, -22.910840882602542],
        [-43.179504944244286, -22.911097826243633],
        [-43.17939765588369, -22.91149312320212],
        [-43.17924745217886, -22.911769830387215],
        [-43.17911870614615, -22.912026772267637],
        [-43.179011417785546, -22.912244184247584],
        [-43.178968502441315, -22.912540654567422],
        [-43.17888267175283, -22.912916182708386],
        [-43.178732468048004, -22.913232416125425],
        [-43.17860372201529, -22.913509119760164],
        [-43.178303314605614, -22.913667235869255],
        [-43.17815311090078, -22.91386488074626],
        [-43.177809788146874, -22.913983467534138],
        [-43.17744500772085, -22.914082289778108],
        [-43.177058769622704, -22.9141613475214],
        [-43.176758362213036, -22.91420087637576],
        [-43.17641503945914, -22.914299698461235],
        [-43.17611463204946, -22.914299698461235],
        [-43.17577130929556, -22.9141415830899],
        [-43.1755996479186, -22.913924174153166],
        [-43.17540652886953, -22.913746293854643],
    ];
    const key = 'get_your_own_OpIi9ZULNHzrESv6T2vL';
    const source = new ol.source.TileJSON({
        url: `https://api.maptiler.com/maps/streets-v2/tiles.json?key=${key}`,
        tileSize: 512,
        crossOrigin: 'anonymous'
    });

    const attribution = new ol.control.Attribution({
        collapsible: false,
    });

    const map = new ol.Map({
        layers: [
            new ol.layer.Tile({
                source: source
            })
        ],
        controls: ol.control.defaults.defaults({ attribution: false }).extend([attribution]),
        target: 'map',
        view: new ol.View({
            constrainResolution: true,
            center: ol.proj.fromLonLat([-43.206091, -22.920387]),
            zoom: 14
        })
    });

    function DeleteMarkers() {
        //Loop through all the markers and remove
        for (var i = 0; i < markers.length - 1; i++) {
            map.removeLayer(markers[i]);
            markers.unshift();
        }
    };

    const marker = new ol.layer.Vector({
        source: new ol.source.Vector({
            features: [
                new ol.Feature({
                    geometry: new ol.geom.Point(
                        ol.proj.fromLonLat([-43.206091, -22.920387])
                    )
                })
            ],
        }),

        style: new ol.style.Style({
            image: new ol.style.Icon({
                anchor: [0.5, 1],
                crossOrigin: 'anonymous',
                src: 'https://docs.maptiler.com/openlayers/default-marker/marker-icon.png',

            })
        })
    })

    map.addLayer(marker);

    function SetRotation(locationS, locationE) {
        if (Math.abs(locationS[0] - locationE[0]) < 0.0000000000000000000000001) {
            return 90;
        } else {
            return Math.atan2((locationE[0] - locationS[0]), (locationE[1] - locationS[1]));
        }
    };

    function AddMarker(locationS, rotationA) {

        marker2 = new ol.layer.Vector({
            source: new ol.source.Vector({
                features: [
                    new ol.Feature({
                        geometry: new ol.geom.Point(
                            locationS
                        )
                    })
                ],
            }),

            style: new ol.style.Style({
                image: new ol.style.Icon({
                    anchor: [15, 15],
                    anchorXUnits: 'pixels',
                    anchorYUnits: 'pixels',
                    crossOrigin: 'anonymous',
                    src: 'car_topview.svg',
                    rotation: rotationA,
                })
            })
        })

        markers.push(marker2);

        if (markers.length > 0) {
            DeleteMarkers();
        }

        map.addLayer(marker2);
    }

    function setPosition() {

        //let num = Math.floor(Math.random() * 93);

        if (time <= 0) {
            dr = true;
        }

        if (time >= listLonLat.length - 1) {
            dr = false;
        }

        if (dr == true) {
            locationS = [listLonLat[time][0], listLonLat[time][1]];
            locationE = [listLonLat[time + 1][0], listLonLat[time + 1][1]];
            rotationA = SetRotation(locationS, locationE);
            console.log(rotationA);
            time++;
        }
        else {
            locationS = [listLonLat[time][0], listLonLat[time][1]];
            locationE = [listLonLat[time - 1][0], listLonLat[time - 1][1]];
            rotationA = SetRotation(locationS, locationE);
            console.log(rotationA);
            time--;
        }

        locationS = ol.proj.fromLonLat([listLonLat[time][0], listLonLat[time][1]]);
        AddMarker(locationS, rotationA);
    }

    // setInterval(setPosition, 300);

    map.on('click', function (evt) {
        // console.log(evt);
        // console.info(evt.pixel);
        // console.info(map.getPixelFromCoordinate(evt.coordinate));
        // console.info(ol.proj.toLonLat(evt.coordinate));
        var coords = ol.proj.toLonLat(evt.coordinate);
        var lat = coords[1];
        var lon = coords[0];
        console.log(`[${lon}, ${lat}],`);
        const coordinates = [
            [
                [
                    [108.19777679443365, 16.02310943603544],
                    [108.19771575927734, 16.023309707641658],
                    [108.198486328125, 16.023315429687614],
                    [108.1989364624024, 16.02334022521984],
                    [108.19901275634783, 16.023351669311523],
                    [108.19915771484403, 16.023393630981388],
                    [108.19927978515631, 16.023435592651481],
                    [108.19942474365234, 16.023513793945426],
                    [108.19976043701166, 16.023740768432617],
                    [108.2001190185548, 16.023937225341854],
                    [108.20070648193354, 16.024240493774641],
                    [108.20095825195312, 16.024349212646769],
                    [108.20105743408232, 16.024372100830192],
                    [108.20114135742187, 16.024387359619084],
                    [108.20126342773449, 16.024393081665039],
                    [108.20137023925787, 16.024366378784237],
                    [108.2014617919923, 16.024288177490462],
                    [108.20153045654297, 16.024181365966911],
                    [108.20166778564447, 16.023923873901367],
                    [108.20176696777366, 16.023817062378043],
                    [108.201904296875, 16.02376747131342],
                    [108.20209503173828, 16.02379035949707],
                    [108.20222473144543, 16.023807525634709],
                    [108.20247650146484, 16.023832321167276],
                    [108.20297241210966, 16.023864746093864],
                    [108.20406341552757, 16.023967742920206],
                    [108.20468139648466, 16.024019241333008],
                    [108.20500183105474, 16.024076461791992],
                    [108.20522308349615, 16.02413368225109],
                    [108.2054061889649, 16.024204254150334],
                    [108.20552062988298, 16.024259567260742],
                    [108.20565795898449, 16.024333953857536],
                    [108.20575714111334, 16.024389266967887],
                    [108.20585632324213, 16.024457931518555],
                    [108.20617675781256, 16.024761199951115],
                    [108.20647430419939, 16.025005340576172],
                    [108.20665740966814, 16.025156021118164],
                    [108.2068252563476, 16.025260925292969],
                    [108.20705413818359, 16.025384902954329],
                    [108.20734405517607, 16.02552413940424],
                    [108.2074890136721, 16.025606155395565],
                    [108.20752716064482, 16.025669097900504],
                    [108.20754241943388, 16.025772094726676],
                    [108.20753479003935, 16.02584648132347],
                    [108.20724487304687, 16.028047561645735],
                    [108.20752716064482, 16.027944564819563],
                    [108.20749664306663, 16.028852462768725],
                    [108.20744323730469, 16.029571533203182],
                    [108.20742034912126, 16.030496597290039],
                    [108.2074050903322, 16.031204223632812],
                    [108.2073516845706, 16.0316677093507],
                    [108.20724487304687, 16.031995773315487],
                    [108.2071914672851, 16.032180786132812],
                    [108.20700073242182, 16.032907485962028],
                    [108.20690155029303, 16.033515930175781],
                    [108.20674133300787, 16.034055709839095],
                    [108.20758056640619, 16.034608840942667],
                    [108.20737457275402, 16.035461425781307],
                    [108.20701599121088, 16.036785125732365],
                    [108.2069625854495, 16.037004470825423],
                    [108.20683288574236, 16.037702560424862],
                    [108.2073516845706, 16.038202285766658],
                    [108.20782470703125, 16.038591384887809],
                    [108.20791625976591, 16.038740158080998],
                    [108.20867919921903, 16.038244247436751],
                    [108.2093505859375, 16.037847518920898],
                    [108.20944976806669, 16.037794113159123],
                    [108.2095870971682, 16.037809371948242],
                    [108.20965576171886, 16.037931442260856],
                    [108.20975494384771, 16.038152694702262],
                    [108.20986938476557, 16.038473129272518],
                    [108.20996856689476, 16.038600921631087],
                    [108.21008300781267, 16.038726806640682],
                    [108.20982360839872, 16.039499282837141],
                    [108.20977783203148, 16.039831161499137],
                    [108.20977020263678, 16.040031433105696],
                    [108.2098007202149, 16.04012489318859],
                    [108.20990753173845, 16.040258407592717],
                    [108.21002960205107, 16.040079116821516],
                    [108.21033477783209, 16.0396156311038],
                    [108.2104034423831, 16.039489746093807],
                    [108.21056365966803, 16.039237976074219],
                    [108.21065521240251, 16.03903770446783],
                    [108.21073913574241, 16.038785934448242],
                    [108.21080780029308, 16.038494110107365],
                    [108.21086120605486, 16.038230895996094],
                    [108.21091461181646, 16.038015365600756],
                    [108.21097564697294, 16.037839889526367],
                    [108.21105194091814, 16.037738800048771],
                    [108.21118164062511, 16.037702560424862],
                    [108.21138000488293, 16.037624359131087],
                    [108.21155548095732, 16.037399291992301],
                    [108.21230316162138, 16.036308288574162],
                    [108.21274566650408, 16.035726547241381],
                    [108.21316528320312, 16.035154342651538],
                    [108.21328735351574, 16.034980773925724],
                    [108.21463012695307, 16.0324840545656],
                    [108.21462249755871, 16.032251358032454],
                    [108.21456909179693, 16.032047271728686],
                    [108.21443939208979, 16.031894683837891],
                    [108.21426391601557, 16.031841278076172],
                    [108.21401214599638, 16.031824111938477],
                    [108.21377563476568, 16.031797409057674],
                    [108.2135848999024, 16.031744003295898],
                    [108.21349334716791, 16.031654357910213],
                    [108.21343994140653, 16.031526565551815],
                    [108.2134552001956, 16.031450271606445],
                    [108.21357727050787, 16.031339645385913],
                    [108.21381378173834, 16.031278610229606],
                    [108.21405029296886, 16.031230926513786],
                    [108.21430969238281, 16.031108856201172],
                    [108.21453857421881, 16.030908584594954],
                    [108.21461486816418, 16.030719757080249],
                    [108.21463012695307, 16.030517578125057],
                    [108.21459960937528, 16.03022575378418],
                    [108.21450805664062, 16.029920578003043],
                    [108.21453857421881, 16.029680252075138],
                    [108.21463012695307, 16.029556274414119],
                    [108.21473693847679, 16.029455184936523],
                    [108.2149353027346, 16.02942085266119],
                    [108.21535491943388, 16.029489517211857],
                    [108.21561431884783, 16.02953147888195],
                    [108.21588134765648, 16.029590606689453],
                    [108.21644592285162, 16.029586791992301],
                    [108.2166366577149, 16.029428482055721],
                    [108.21726989746122, 16.028694152832031],
                    [108.21770477294939, 16.028118133544979],
                    [108.21783447265653, 16.027845382690543],
                    [108.21781921386724, 16.027460098266602],
                    [108.21776580810553, 16.026702880859432],
                    [108.21771240234392, 16.025897979736442],
                    [108.21758270263678, 16.025541305542276],
                    [108.21751403808611, 16.025007247924748],
                    [108.2176132202149, 16.024709701538313],
                    [108.21765136718778, 16.024568557739428],
                    [108.2179031372072, 16.024330139160327],
                    [108.21820068359381, 16.024234771728686],
                    [108.21856689453131, 16.024301528930948],
                    [108.21888732910156, 16.024503707885742],
                    [108.21910858154303, 16.024728775024357],
                    [108.21946716308594, 16.024892807007063],
                    [108.22082519531256, 16.025281906128157],
                    [108.22201538085943, 16.025543212890682],
                    [108.22316741943388, 16.025880813598633],
                    [108.22422790527344, 16.026227951050032],
                    [108.22481536865234, 16.026790618896541],
                    [108.22619628906256, 16.027565002441577],
                    [108.22766876220703, 16.028047561645735],
                    [108.22910308837919, 16.028360366821289],
                    [108.23027801513666, 16.028501510620117],
                    [108.23167419433594, 16.02830886840826],
                    [108.23284912109381, 16.028072357177734],
                    [108.23329925537138, 16.028141021728572],
                    [108.23387908935558, 16.027355194091854],
                    [108.23567199707031, 16.025814056396712],
                    [108.23642730712891, 16.025150299072209],
                    [108.23722076416021, 16.024564743042049],
                    [108.23811340332048, 16.023633956909464],
                    [108.23885345458979, 16.022489547729776],
                    [108.23934173584007, 16.020795822143668],
                    [108.23935699462896, 16.019882202148551],
                    [108.24005126953125, 16.019649505615405],
                    [108.24211883544939, 16.019523620605412],
                    [108.2444152832033, 16.019250869750977],
                    [108.24627685546886, 16.018545150756836],
                    [108.24743652343744, 16.017650604248104],
                    [108.2479782104495, 16.016895294189567],
                    [108.24851226806646, 16.015941619873161],
                    [108.24839782714838, 16.015346527099666],
                    [108.24822998046892, 16.014421463012638],
                    [108.2471542358399, 16.0130615234375],
                    [108.24661254882818, 16.01279449462902],
                    [108.24652862548845, 16.012754440307731],
                    [108.24584960937506, 16.012916564941406],
                    [108.24517822265642, 16.013130187988509],
                    [108.24373626709007, 16.01385498046875],
                    [108.24148559570341, 16.01507759094261],
                    [108.23957061767607, 16.016122817993278],
                    [108.23893737792974, 16.01663970947277],
                    [108.2379455566408, 16.017515182495231],
                    [108.23788452148449, 16.017475128173942],
                    [108.23664855957037, 16.016448974609489],
                    [108.23567962646484, 16.015506744384993],
                    [108.2342147827149, 16.01436805725109],
                    [108.23288726806646, 16.012878417968921],
                    [108.23221588134783, 16.010732650757006],
                    [108.23207092285162, 16.009555816650391],
                    [108.23215484619169, 16.006729125976676],
                    [108.23210144042991, 16.00615310668968],
                    [108.23182678222673, 16.005392074585131],
                    [108.23155975341825, 16.004692077636719],
                    [108.23109436035156, 16.004140853881893],
                    [108.23001861572271, 16.003007888794116],
                    [108.22850799560575, 16.001140594482422],
                    [108.22795104980497, 15.999773979187012],
                    [108.22811889648443, 15.999119758606184],
                    [108.22873687744152, 15.997995376587028],
                    [108.22897338867205, 15.997626304626465],
                    [108.22952270507807, 15.996591567993391],
                    [108.22967529296903, 15.996184349060172],
                    [108.22972106933611, 15.995700836181697],
                    [108.22976684570312, 15.995143890380916],
                    [108.22957611083984, 15.993821144104004],
                    [108.22931671142572, 15.993036270141715],
                    [108.22872161865263, 15.992024421692065],
                    [108.22796630859386, 15.991307258606184],
                    [108.224906921387, 15.989538192748967],
                    [108.22365570068359, 15.988703727722111],
                    [108.22096252441423, 15.986770629882813],
                    [108.21901702880854, 15.986113548278752],
                    [108.21717834472656, 15.985903739929199],
                    [108.21604919433599, 15.985871315002669],
                    [108.21582031250017, 15.98560810089117],
                    [108.21578979492182, 15.985383987426871],
                    [108.2157516479495, 15.985049247741813],
                    [108.21579742431658, 15.984640121459961],
                    [108.21591949462919, 15.984307289123535],
                    [108.21623229980469, 15.983976364135856],
                    [108.21662139892584, 15.9835720062257],
                    [108.21723175048834, 15.983319282531795],
                    [108.21769714355463, 15.983139038085938],
                    [108.21857452392584, 15.983114242553711],
                    [108.21999359130876, 15.983391761780013],
                    [108.22087097167974, 15.983477592468319],
                    [108.22109985351574, 15.983444213867472],
                    [108.22136688232422, 15.983409881591967],
                    [108.22152709960955, 15.983338356018237],
                    [108.22171783447283, 15.983228683471623],
                    [108.22199249267601, 15.982972145080566],
                    [108.22210693359392, 15.982526779174805],
                    [108.222221374512, 15.981654167175293],
                    [108.22219085693365, 15.981020927429313],
                    [108.22220611572271, 15.979905128479174],
                    [108.22191619873064, 15.978562355041504],
                    [108.22091674804699, 15.977452278137491],
                    [108.21868896484375, 15.974967956543196],
                    [108.21727752685575, 15.973144531250284],
                    [108.21640014648437, 15.971737861633585],
                    [108.21410369873064, 15.972005844116211],
                    [108.21371459960955, 15.972260475158691],
                    [108.21372222900408, 15.972622871399153],
                    [108.2139511108399, 15.973442077636946],
                    [108.21418762207037, 15.974006652832031],
                    [108.21421051025419, 15.974267959594954],
                    [108.21417999267584, 15.97460842132574],
                    [108.214111328125, 15.974967956543196],
                    [108.21405029296886, 15.975127220153809],
                    [108.21394348144531, 15.97530555725109],
                    [108.2138214111331, 15.97546482086193],
                    [108.21360778808599, 15.975683212280501],
                    [108.21336364746094, 15.97581958770752],
                    [108.21311187744135, 15.975936889648665],
                    [108.21279907226562, 15.976073265075684],
                    [108.21236419677751, 15.976187705993766],
                    [108.21147155761724, 15.976297378540039],
                    [108.21086883544922, 15.976331710815714],
                    [108.20997619628929, 15.976778030395565],
                    [108.20973968505859, 15.977090835571289],
                    [108.20946502685558, 15.977570533752555],
                    [108.20926666259794, 15.978404998779411],
                    [108.20909118652355, 15.979688644409407],
                    [108.20895385742205, 15.980977058410645],
                    [108.20903015136724, 15.981860160827807],
                    [108.20919799804693, 15.98266792297386],
                    [108.20965576171886, 15.983304977416992],
                    [108.2100906372072, 15.984538078308276],
                    [108.21051025390625, 15.985137939453239],
                    [108.2115859985351, 15.985914230346623],
                    [108.21163940429687, 15.987586975097713],
                    [108.20964050292997, 15.988081932067871],
                    [108.20959472656273, 15.988972663879565],
                    [108.20977783203148, 15.990583419800032],
                    [108.20938110351568, 15.991655349731502],
                    [108.20925140380888, 15.992952346801985],
                    [108.20941925048834, 15.994291305541935],
                    [108.20970916748064, 15.995631217956543],
                    [108.20899200439459, 15.995587348938102],
                    [108.2120361328125, 15.999048233032454],
                    [108.21192932128935, 15.999780654907227],
                    [108.21205902099615, 16.004430770874023],
                    [108.21296691894531, 16.004741668701115],
                    [108.21311950683588, 16.005987167358398],
                    [108.21338653564459, 16.008167266845646],
                    [108.21403503417997, 16.008037567138672],
                    [108.21439361572294, 16.007890701294059],
                    [108.21467590332048, 16.007719039916992],
                    [108.21514892578131, 16.007774353027571],
                    [108.2153778076173, 16.008029937744141],
                    [108.21540832519526, 16.008121490478629],
                    [108.21536254882841, 16.008356094360522],
                    [108.21512603759788, 16.009124755859602],
                    [108.21482086181635, 16.010309219360579],
                    [108.21473693847679, 16.01058769226097],
                    [108.21473693847679, 16.010820388793945],
                    [108.21482086181635, 16.011125564575309],
                    [108.21510314941412, 16.01157188415533],
                    [108.21534729003935, 16.012004852294922],
                    [108.21549987792991, 16.012310028076229],
                    [108.21559143066401, 16.012538909912223],
                    [108.2156066894533, 16.012668609619197],
                    [108.21528625488287, 16.012649536132756],
                    [108.21528625488287, 16.013044357299805],
                    [108.21528625488287, 16.013477325439737],
                    [108.21517944335966, 16.014106750488338],
                    [108.21498870849638, 16.014940261840934],
                    [108.21475219726568, 16.015645980835075],
                    [108.21443939208979, 16.016361236572379],
                    [108.21409606933611, 16.016946792602539],
                    [108.21366119384777, 16.016708374023438],
                    [108.21316528320312, 16.01614189147972],
                    [108.21269226074247, 16.015684127807617],
                    [108.2121124267581, 16.015176773071232],
                    [108.21153259277372, 16.014274597168196],
                    [108.21112060546898, 16.013406753540096],
                    [108.21075439453131, 16.012601852416935],
                    [108.21002960205107, 16.011714935302791],
                    [108.20772552490263, 16.009784698486555],
                    [108.20660400390636, 16.008571624755859],
                    [108.20655059814459, 16.008497238159407],
                    [108.20558929443382, 16.010728836059627],
                    [108.2052536010745, 16.011396408081112],
                    [108.2050399780274, 16.012067794799975],
                    [108.20506286621122, 16.012941360473633],
                    [108.20504760742216, 16.014434814453125],
                    [108.20484924316412, 16.015386581420955],
                    [108.20431518554699, 16.016735076904411],
                    [108.2035446166995, 16.018583297729492],
                    [108.20336151123058, 16.018953323364371],
                    [108.20212554931646, 16.021738052368164],
                    [108.20167541503901, 16.022666931152571],
                    [108.20102691650396, 16.024040222168026],
                    [108.20072937011736, 16.023979187011719],
                    [108.1999053955081, 16.023525238037337],
                    [108.19976806640619, 16.023439407348633],
                    [108.19923400878906, 16.023214340210018],
                    [108.19835662841803, 16.023143768310774],
                    [108.19777679443365, 16.02310943603544],
                ],
            ],
            [
                [
                    [108.19777679443365, 16.02310943603544],
                    [108.19791412353516, 16.022764205932617],
                    [108.1986923217774, 16.02026557922369],
                    [108.19749450683611, 16.019716262817496],
                    [108.19692230224626, 16.019451141357422],
                    [108.19667053222685, 16.019323348999194],
                    [108.19635772705095, 16.019136428833121],
                    [108.19503021240251, 16.018537521362305],
                    [108.19472503662115, 16.018325805664176],
                    [108.19461059570307, 16.018100738525334],
                    [108.19461059570307, 16.017974853515739],
                    [108.19453430175787, 16.017326354980696],
                    [108.19450378417974, 16.017120361328352],
                    [108.19430541992193, 16.017026901245288],
                    [108.19415283203131, 16.016941070556584],
                    [108.19400787353544, 16.016849517822493],
                    [108.19387054443376, 16.016704559326286],
                    [108.19376373291038, 16.016481399536417],
                    [108.19365692138666, 16.01632118225092],
                    [108.19361114501982, 16.016162872314567],
                    [108.19356536865257, 16.015962600708008],
                    [108.19345855712885, 16.015636444091797],
                    [108.19277954101568, 16.015869140625284],
                    [108.19284820556669, 16.016153335571289],
                    [108.19210815429699, 16.016252517700252],
                    [108.19194030761713, 16.015741348266715],
                    [108.19202423095709, 16.015436172485352],
                    [108.19139862060564, 16.015682220458984],
                    [108.19066619873047, 16.01624870300293],
                    [108.19029998779303, 16.016767501831339],
                    [108.19007873535156, 16.017513275146428],
                    [108.18997192382818, 16.018148422241154],
                    [108.18995666503912, 16.018363952636832],
                    [108.19001770019543, 16.018533706665096],
                    [108.1901473999024, 16.018743515014819],
                    [108.19048309326172, 16.019096374511832],
                    [108.19049072265631, 16.019229888915959],
                    [108.19041442871088, 16.019277572631779],
                    [108.19026947021484, 16.01930046081543],
                    [108.19010162353516, 16.019298553466797],
                    [108.18972778320318, 16.019168853759822],
                    [108.18929290771501, 16.019071578979606],
                    [108.18899536132835, 16.018985748291072],
                    [108.18878173828131, 16.018932342529524],
                    [108.18863677978521, 16.018863677978459],
                    [108.18843078613287, 16.018711090087891],
                    [108.18830108642589, 16.01866722106945],
                    [108.1881408691408, 16.018682479858683],
                    [108.18798828125, 16.018756866455305],
                    [108.18783569335943, 16.018829345703125],
                    [108.18769073486357, 16.018968582153605],
                    [108.18748474121099, 16.019107818603516],
                    [108.18724822998053, 16.019134521484318],
                    [108.18698120117182, 16.019081115722713],
                    [108.18661499023455, 16.018928527832145],
                    [108.1862030029298, 16.018581390380916],
                    [108.1859893798831, 16.018461227417049],
                    [108.18571472167969, 16.018426895141545],
                    [108.18544769287104, 16.018430709839095],
                    [108.1851730346682, 16.018501281738338],
                    [108.18481445312506, 16.018613815307845],
                    [108.18434906005876, 16.018789291382063],
                    [108.18265533447266, 16.019258499145508],
                    [108.18101501464872, 16.019876480102596],
                    [108.17927551269537, 16.020442962646484],
                    [108.17819213867199, 16.020793914795092],
                    [108.17809295654303, 16.020784378051758],
                    [108.17774963378912, 16.02036476135271],
                    [108.17760467529325, 16.020206451416016],
                    [108.17743682861322, 16.020048141479435],
                    [108.17730712890625, 16.01995849609375],
                    [108.17719268798834, 16.019920349121094],
                    [108.17698669433599, 16.019884109497127],
                    [108.17681884765653, 16.019859313964957],
                    [108.17641448974615, 16.019817352294865],
                    [108.17622375488287, 16.019777297973633],
                    [108.17604827880865, 16.019756317138786],
                    [108.17588806152372, 16.019712448120117],
                    [108.17567443847685, 16.019649505615405],
                    [108.17536926269548, 16.019483566284123],
                    [108.17523193359381, 16.019367218017635],
                    [108.1751251220706, 16.019264221191463],
                    [108.17501068115234, 16.019134521484318],
                    [108.1748123168947, 16.018848419189396],
                    [108.17474365234403, 16.01873970031744],
                    [108.17470550537115, 16.018627166748331],
                    [108.17459869384783, 16.018428802490348],
                    [108.17446899414068, 16.018203735351562],
                    [108.17434692382841, 16.017971038818359],
                    [108.17424011230486, 16.017824172973917],
                    [108.17413330078131, 16.017673492431925],
                    [108.17395782470732, 16.017509460449446],
                    [108.17375946044928, 16.017368316650561],
                    [108.17349243164062, 16.017204284668253],
                    [108.17321777343778, 16.017053604126261],
                    [108.17285156250011, 16.016876220703125],
                    [108.17273712158203, 16.016830444336051],
                    [108.17253875732422, 16.016757965087834],
                    [108.17243194580107, 16.016733169555664],
                    [108.17234802246094, 16.016719818115519],
                    [108.17220306396507, 16.016698837280501],
                    [108.17201232910179, 16.016668319702148],
                    [108.17164611816412, 16.016595840454329],
                    [108.17148590087919, 16.016565322875977],
                    [108.1712265014649, 16.016462326049975],
                    [108.1708602905274, 16.016288757324162],
                    [108.17061614990251, 16.016134262085188],
                    [108.17028045654303, 16.015913009643555],
                    [108.16990661621099, 16.016199111938477],
                    [108.16980743408197, 16.016311645507983],
                    [108.16941070556652, 16.016704559326286],
                    [108.16886901855463, 16.017066955566406],
                    [108.16839599609398, 16.017351150512695],
                    [108.16764831542974, 16.017896652221793],
                    [108.1673660278322, 16.018049240112532],
                    [108.16700744628906, 16.018350601196346],
                    [108.16655731201183, 16.018785476684684],
                    [108.16617584228527, 16.019056320190714],
                    [108.16555023193365, 16.019630432128963],
                    [108.16503906249994, 16.020214080810547],
                    [108.16497039794928, 16.020462036132926],
                    [108.16492462158203, 16.020917892456112],
                    [108.1648406982423, 16.021633148193416],
                    [108.16473388671875, 16.021823883056697],
                    [108.16456604003912, 16.022062301635799],
                    [108.16439056396507, 16.022266387939567],
                    [108.16377258300781, 16.02270698547386],
                    [108.16278076171892, 16.023597717285156],
                    [108.16247558593773, 16.023784637451456],
                    [108.16225433349609, 16.023853302002124],
                    [108.16213226318388, 16.023872375488565],
                    [108.16164398193376, 16.023809432983512],
                    [108.16064453125011, 16.023639678955078],
                    [108.16003417968778, 16.023509979248274],
                    [108.15963745117193, 16.023420333862362],
                    [108.15945434570318, 16.023424148559741],
                    [108.15936279296892, 16.023458480835075],
                    [108.15922546386724, 16.023666381836051],
                    [108.1597061157226, 16.023876190185547],
                    [108.16003417968778, 16.024318695068416],
                    [108.16053009033203, 16.025226593017805],
                    [108.16065979003901, 16.025503158569393],
                    [108.16076660156273, 16.025703430176009],
                    [108.16093444824224, 16.025903701782397],
                    [108.16123199462885, 16.026216506958292],
                    [108.16140747070324, 16.026359558105753],
                    [108.16155242919928, 16.026453018188477],
                    [108.16168975830084, 16.026504516601619],
                    [108.16197967529308, 16.02659988403326],
                    [108.16217041015636, 16.026681900024414],
                    [108.1623153686524, 16.026756286621207],
                    [108.16251373291044, 16.026832580566406],
                    [108.1626052856447, 16.02686691284174],
                    [108.16300964355469, 16.027042388916129],
                    [108.16318511962891, 16.027158737182617],
                    [108.16329956054716, 16.027261734008789],
                    [108.16352844238276, 16.027557373046875],
                    [108.16370391845697, 16.027769088745345],
                    [108.16384887695341, 16.028001785278491],
                    [108.16398620605474, 16.028343200683594],
                    [108.1640243530274, 16.028421401977766],
                    [108.16410827636736, 16.028486251831055],
                    [108.16408538818354, 16.028734207153263],
                    [108.16398620605474, 16.029102325439567],
                    [108.16385650634794, 16.029533386230696],
                    [108.16371917724604, 16.030008316040153],
                    [108.16358184814453, 16.030368804931641],
                    [108.16352844238276, 16.030502319335994],
                    [108.16326141357428, 16.030864715576115],
                    [108.1629714965822, 16.031223297119425],
                    [108.16281127929687, 16.031469345092887],
                    [108.16277313232439, 16.031608581542969],
                    [108.1627578735351, 16.031745910644531],
                    [108.1627578735351, 16.031856536865405],
                    [108.16278076171892, 16.032003402710018],
                    [108.16285705566429, 16.032299041748274],
                    [108.16287994384771, 16.032417297363338],
                    [108.16288757324224, 16.03252029418951],
                    [108.16283416748053, 16.032938003540039],
                    [108.16280364990234, 16.033258438110465],
                    [108.16274261474621, 16.033624649047908],
                    [108.16246795654303, 16.034141540527401],
                    [108.16190338134788, 16.034749984741211],
                    [108.16173553466803, 16.034795761108398],
                    [108.1617050170899, 16.035091400146484],
                    [108.1616287231447, 16.035329818725586],
                    [108.16159057617199, 16.035516738891658],
                    [108.16159820556652, 16.035650253296183],
                    [108.16165924072266, 16.035842895507869],
                    [108.16175079345732, 16.035987854003906],
                    [108.16194915771513, 16.036251068115405],
                    [108.16236877441401, 16.036954879760799],
                    [108.16254425048839, 16.037204742431811],
                    [108.16300964355469, 16.037765502929744],
                    [108.16361999511741, 16.03832054138212],
                    [108.16436767578131, 16.038799285888729],
                    [108.16530609130859, 16.039379119873104],
                    [108.16616058349638, 16.039888381958235],
                    [108.16691589355497, 16.040317535400618],
                    [108.16750335693371, 16.040666580200252],
                    [108.16787719726591, 16.041074752807617],
                    [108.1681747436524, 16.041597366333235],
                    [108.16873931884766, 16.042520523071289],
                    [108.16957092285185, 16.043691635131779],
                    [108.17050170898443, 16.044746398925781],
                    [108.17097473144548, 16.045314788818473],
                    [108.17114257812494, 16.045530319213924],
                    [108.17121887207031, 16.04567909240734],
                    [108.17178344726562, 16.046651840210188],
                    [108.17190551757807, 16.04705810546875],
                    [108.17189025878918, 16.047409057617358],
                    [108.17176818847656, 16.047935485839787],
                    [108.17155456542986, 16.048538208007813],
                    [108.17140197753906, 16.049104690552042],
                    [108.1711730957033, 16.04980278015131],
                    [108.17069244384771, 16.051052093506144],
                    [108.17031860351568, 16.052595138549862],
                    [108.169975280762, 16.054100036621094],
                    [108.16976165771513, 16.054765701294173],
                    [108.16967010498047, 16.055109024047852],
                    [108.16964721679705, 16.055250167846737],
                    [108.16963958740251, 16.055332183837891],
                    [108.16969299316406, 16.055433273315657],
                    [108.16986846923828, 16.055463790893612],
                    [108.17030334472679, 16.055475234985352],
                    [108.17058563232416, 16.05551910400402],
                    [108.17110443115263, 16.055606842041072],
                    [108.17118072509783, 16.055587768554687],
                    [108.17132568359386, 16.055246353149357],
                    [108.17145538330084, 16.054937362671012],
                    [108.17156219482439, 16.054756164550895],
                    [108.17173767089861, 16.054719924926758],
                    [108.17190551757807, 16.054740905761776],
                    [108.17211151123041, 16.05479812622093],
                    [108.17214202880876, 16.054864883422795],
                    [108.17211914062517, 16.055040359497013],
                    [108.1720733642581, 16.055282592773665],
                    [108.17227172851574, 16.055326461791935],
                    [108.17234802246094, 16.055400848388729],
                    [108.17238616943365, 16.055461883545036],
                    [108.17232513427751, 16.05573844909668],
                    [108.17215728759766, 16.056289672851676],
                    [108.17195892333984, 16.057682037353572],
                    [108.17283630371122, 16.058364868164119],
                    [108.17410278320318, 16.059253692627237],
                    [108.17824554443376, 16.061979293823526],
                    [108.17832183837896, 16.061544418335018],
                    [108.18190765380865, 16.050661087036076],
                    [108.18803405761741, 16.032575607299862],
                    [108.18957519531256, 16.028015136718977],
                    [108.18970489501953, 16.02763938903837],
                    [108.19001770019543, 16.026742935180721],
                    [108.19026184082048, 16.026088714599723],
                    [108.19062805175798, 16.02512168884283],
                    [108.19095611572294, 16.024486541748274],
                    [108.19142913818359, 16.023796081543196],
                    [108.19191741943371, 16.023122787475586],
                    [108.19226837158232, 16.023435592651481],
                    [108.1923828125, 16.023506164550895],
                    [108.19284057617216, 16.023210525512695],
                    [108.19306182861339, 16.022972106933594],
                    [108.19339752197271, 16.022590637207031],
                    [108.1938018798831, 16.022207260131836],
                    [108.19410705566406, 16.0219020843507],
                    [108.1940155029298, 16.021848678589095],
                    [108.19439697265636, 16.021724700927678],
                    [108.1947555541995, 16.021642684936523],
                    [108.19525146484375, 16.021669387817326],
                    [108.19562530517578, 16.021781921387003],
                    [108.19599914550781, 16.022062301635799],
                    [108.19670867919916, 16.022817611694563],
                    [108.19724273681669, 16.023080825805891],
                    [108.19777679443365, 16.02310943603544],
                ],
            ],
        ];
        // Create a new MultiPolygon geometry
        const transformedCoordinates = coordinates.map((polygonCoords) =>
            polygonCoords.map((linearRingCoords) =>
                linearRingCoords.map((coord) => ol.proj.transform(coord, "EPSG:4326", "EPSG:3857"))
            )
        );
        const multiPolygonGeometry = new ol.geom.MultiPolygon(transformedCoordinates);

        // Create a new OpenLayers feature with the MultiPolygon geometry
        const polygon = new ol.Feature({
            geometry: multiPolygonGeometry,
        });
        // Assuming you already have an OpenLayers map and a vector layer set up
        // Create a vector source if you haven't already
        const vectorSource = new ol.source.Vector();

        // Add the 'polygon' feature to the vector source
        vectorSource.addFeature(polygon);

        // Create a vector layer and link it to the vector source
        const vectorLayer = new ol.layer.Vector({
            source: vectorSource,
        });

        // Assuming you have an OpenLayers map instance stored in the 'map' variable
        map.addLayer(vectorLayer);

        // Optionally, you can zoom to the extent of the added feature(s)
        map.getView().fit(vectorSource.getExtent(), map.getSize());
    });
</script>

</html>